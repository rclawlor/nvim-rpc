use rmpv::Value;

use crate::api::*;
use crate::value_vec;
use crate::error::Error;


/// The below implementations are autogenerated using the Neovim API
impl {{name}} {
    {{#each functions}}
    /// Since: {{since}}
    pub fn {{name}}(&mut self{{#each parameters}}, {{this.name}}: {{{as_type this.parameter_type}}}{{/each}}) -> Result<{{{as_type return_type}}}, Error> {
        self.session.call(
            "{{@root.prefix}}{{name}}",
            {{#if parameters.[0]}}
            value_vec!({{#each parameters}}{{this.name}}{{#unless @last}}, {{/unless}}{{/each}})
            {{else}}
            Vec::new()
            {{/if}}
        )
    }
    {{#unless @last}}

    {{/unless}}
    {{/each}}
}

